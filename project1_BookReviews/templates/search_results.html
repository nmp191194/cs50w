{% extends "inner_layout.html" %}

{% block title %}
Welcome to the Library!
{% endblock %}

{% block body %}

<div class="container">
    {% if isbn_results|length > 0 %}
    <h2 style="text-align:left;float:left;">Books that matched based on ISBN</h2>
    {% if isbn_results|length > 5 %}
    <a style="text-align:right;float:right;" href="{{ url_for('search_results', type='isbn', query=query ) }}"> View All
        >></a>
    {% endif %}
    <table class="table table-dark">
        <thead>
        <tr>
            <th scope="col">ISBN</th>
            <th scope="col">Title</th>
            <th scope="col">Author</th>
            <th scope="col">Year</th>
            <th scope="col"></th>
        </tr>
        </thead>
        <tbody>
        {% if isbn_results|length > 5 %}
        {% set isbn_results = isbn_results[:5] %}
        {% endif %}
        {% for row in isbn_results %}
        <tr>
            <td>{{ row.isbn }}</td>
            <td>{{ row.title }}</td>
            <td>{{ row.author }}</td>
            <td>{{ row.year }}</td>
            <td><a href="{{ url_for('book', id=row.id) }}"> View </a></td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}
    {% if title_results|length > 0 %}
    <h2 style="text-align:left;float:left;">Books that matched based on title</h2>
    {% if title_results|length > 5 %}
    <a style="text-align:right;float:right;" href="{{ url_for('search_results', type='title', query=query ) }}"> View
        All >></a>
    {% endif %}
    <table class="table table-dark">
        <thead>
        <tr>
            <th scope="col">ISBN</th>
            <th scope="col">Title</th>
            <th scope="col">Author</th>
            <th scope="col">Year</th>
            <th scope="col"></th>
        </tr>
        </thead>
        <tbody>
        {% if title_results|length > 5 %}
        {% set title_results = title_results[:5] %}
        {% endif %}
        {% for row in title_results %}
        <tr>
            <td>{{ row.isbn }}</td>
            <td>{{ row.title }}</td>
            <td>{{ row.author }}</td>
            <td>{{ row.year }}</td>
            <td><a href="{{ url_for('book', id=row.id) }}"> View</a></td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}
    {% if author_results|length > 0 %}
    <h2 style="text-align:left;float:left;">Books that matched based on author</h2>
    {% if author_results|length > 5 %}
    <a style="text-align:right;float:right;" href="{{ url_for('search_results', type='author', query=query ) }}"> View
        All >></a>
    {% endif %}
    <table class="table table-dark">
        <thead>
        <tr>
            <th scope="col">ISBN</th>
            <th scope="col">Title</th>
            <th scope="col">Author</th>
            <th scope="col">Year</th>
            <th scope="col"></th>
        </tr>
        </thead>
        <tbody>
        {% if author_results|length > 5 %}
        {% set author_results = author_results[:5] %}
        {% endif %}
        {% for row in author_results %}
        <tr>
            <td>{{ row.isbn }}</td>
            <td>{{ row.title }}</td>
            <td>{{ row.author }}</td>
            <td>{{ row.year }}</td>
            <td><a href="{{ url_for('book', id=row.id) }}"> View </a></td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}
    {% if results|length > 0 %}
    <table class="table table-dark">
        <thead>
        <tr>
            <th scope="col">ISBN</th>
            <th scope="col">Title</th>
            <th scope="col">Author</th>
            <th scope="col">Year</th>
            <th scope="col"></th>
        </tr>
        </thead>
        <tbody>
        {% for row in results %}
        <tr>
            <td>{{ row.isbn }}</td>
            <td>{{ row.title }}</td>
            <td>{{ row.author }}</td>
            <td>{{ row.year }}</td>
            <td><a href="{{ url_for('book', id=row.id) }}"> View </a></td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% endif %}
</div>
{% endblock %}
